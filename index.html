<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Demo: Thai Address Resolution - Dev Mode</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        /* (CSS styles are kept here for the demo's appearance) */
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #f0f2f5;
            padding: 40px 20px;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        h2 {
            color: #1877f2;
            text-align: center;
            margin-bottom: 25px;
            font-weight: 600;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 400;
            color: #555;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        select {
            width: 100%;
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: 6px;
            box-sizing: border-box;
            font-size: 16px;
            background-color: #fff;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='%23555'%3e%3cpath d='M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z'/%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 10px top 50%;
            background-size: 12px;
            transition: border-color 0.3s;
        }

        select:focus {
            border-color: #1877f2;
            outline: none;
        }

        select:disabled {
            background-color: #f9f9f9;
            cursor: not-allowed;
            color: #aaa;
        }

        #loading-status {
            text-align: center;
            color: #155724;
            font-weight: 600;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #d4edda;
            border-radius: 6px;
            display: none;
        }

        #result-display {
            margin-top: 30px;
            padding: 20px;
            background-color: #f7f9fc;
            border: 1px solid #e0e6ed;
            border-radius: 8px;
        }

        #result-display h4 {
            margin-top: 25px;
            margin-bottom: 5px;
            color: #0056b3;
            font-weight: 600;
            border-bottom: 2px solid #e0e6ed;
            padding-bottom: 5px;
        }

        #result-display pre {
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
            font-size: 14px;
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-bottom: 10px;
        }

        .api-output pre {
            background-color: #eef1f5;
            color: #000;
            font-weight: 500;
        }

        .api-section {
            padding: 15px 0;
        }

        .api-usage-link {
            text-align: center;
            padding: 15px;
            background-color: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 6px;
            margin-top: 20px;
        }
    </style>
</head>

<body>

    <div class="container">
        <h2>API Demo: Thai Address Resolution (Dev Sandbox)</h2>
        <p style="text-align: center; color: #555;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏•‡∏≠‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå JSON ‡πÅ‡∏•‡∏∞‡∏î‡∏π‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á HTML</p>

        <div id="loading-status">‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå</div>

        <div class="api-section">
            <h4>‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á HTML ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ</h4>
            <pre style="background-color: #f0f0f0; color: #4a4a4a; border: 1px solid #ddd;">
&lt;!-- Dropdown Elements ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ID ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î --&gt;
&lt;div class="form-group"&gt;
    &lt;label for="province"&gt;‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î:&lt;/label&gt;
    &lt;select id="province"&gt;&lt;option value=""&gt;--&lt;/option&gt;&lt;/select&gt;
&lt;/div&gt;
&lt;div class="form-group"&gt;
    &lt;label for="district"&gt;‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡πÄ‡∏Ç‡∏ï:&lt;/label&gt;
    &lt;select id="district"&gt;&lt;option value=""&gt;--&lt;/option&gt;&lt;/select&gt;
&lt;/div&gt;
&lt;div class="form-group"&gt;
    &lt;label for="subdistrict"&gt;‡∏ï‡∏≥‡∏ö‡∏•/‡πÅ‡∏Ç‡∏ß‡∏á:&lt;/label&gt;
    &lt;select id="subdistrict"&gt;&lt;option value=""&gt;--&lt;/option&gt;&lt;/select&gt;
&lt;/div&gt;

&lt;!-- ‡∏ä‡πà‡∏≠‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏™‡πà‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ --&gt;
&lt;input type="text" id="postid_field" placeholder="‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå" readonly&gt;
            </pre>
        </div>


        <div style="border: 1px solid #ccc; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
            <h4 style="color: #0056b3; border-bottom: 1px solid #0056b3;">Try It Out: ‡∏ó‡∏î‡∏•‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå</h4>
            <div class="form-group">
                <label for="province">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (Province):</label>
                <select id="province" disabled>
                    <option value="">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</option>
                </select>
            </div>

            <div class="form-group">
                <label for="district">‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡πÄ‡∏Ç‡∏ï (District):</label>
                <select id="district" disabled>
                    <option value="">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏Å‡πà‡∏≠‡∏ô</option>
                </select>
            </div>

            <div class="form-group">
                <label for="subdistrict">‡∏ï‡∏≥‡∏ö‡∏•/‡πÅ‡∏Ç‡∏ß‡∏á (Subdistrict):</label>
                <select id="subdistrict" disabled>
                    <option value="">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡πÄ‡∏Ç‡∏ï‡∏Å‡πà‡∏≠‡∏ô</option>
                </select>
            </div>

            <input type="text" id="postid_field" placeholder="‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå‡∏à‡∏∞‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà" readonly
                style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; background-color: #f5f5f5;">
        </div>

        <div id="result-display">
            <p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡∏ö‡∏•/‡πÅ‡∏Ç‡∏ß‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå JSON</p>
        </div>

        <div class="api-usage-link">
            <p style="margin: 0;">
                **‡∏´‡∏≤‡πÇ‡∏Ñ‡πâ‡∏î JavaScript ‡πÉ‡∏ä‡πà‡πÑ‡∏´‡∏°?** üí° <br>
                ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà Section 1 ‡∏ñ‡∏∂‡∏á Section 4) ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå **`README.md`** ‡∏Ç‡∏≠‡∏á Repository ‡∏ô‡∏µ‡πâ!
            </p>
        </div>
    </div>

    <script>
        // ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏¢‡πà‡∏≠‡∏Ç‡∏ô‡∏≤‡∏î‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏î‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô DEMO ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á JSON Output ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

        const PROVINCE_URL = 'https://raw.githubusercontent.com/kongvut/thai-province-data/master/api/latest/province.json';
        const DISTRICT_URL = 'https://raw.githubusercontent.com/kongvut/thai-province-data/master/api/latest/district.json';
        const SUBDISTRICT_URL = 'https://raw.githubusercontent.com/kongvut/thai-province-data/master/api/latest/sub_district.json';

        const provinceSelect = document.getElementById('province');
        const districtSelect = document.getElementById('district');
        const subdistrictSelect = document.getElementById('subdistrict');
        const postidField = document.getElementById('postid_field');
        const resultDisplay = document.getElementById('result-display');
        const loadingStatus = document.getElementById('loading-status');

        let allProvinces = [];
        let allDistricts = [];
        let allSubdistricts = [];

        async function fetchData(url) {
            try {
                const response = await fetch(url);
                return response.ok ? await response.json() : null;
            } catch (error) {
                console.error('Fetch failed:', url, error);
                return null;
            }
        }

        function populateSelect(selectElement, data, defaultText) {
            selectElement.innerHTML = `<option value="">${defaultText}</option>`;
            if (Array.isArray(data) && data.length > 0) {
                data.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item.id;
                    option.textContent = item.name_th;
                    selectElement.appendChild(option);
                });
                selectElement.disabled = false;
            } else {
                selectElement.disabled = true;
            }
        }

        async function loadAllData() {
            loadingStatus.style.display = 'block';
            loadingStatus.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà...';

            allProvinces = await fetchData(PROVINCE_URL);
            allDistricts = await fetchData(DISTRICT_URL);
            allSubdistricts = await fetchData(SUBDISTRICT_URL);

            if (allProvinces) {
                populateSelect(provinceSelect, allProvinces, '-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î --');
                loadingStatus.textContent = '‚úÖ ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå';
                setTimeout(() => { loadingStatus.style.display = 'none'; }, 2000);
            }
        }

        // --- Event Listeners (Cascading Logic) ---
        provinceSelect.addEventListener('change', () => {
            const provinceId = parseInt(provinceSelect.value);
            districtSelect.disabled = subdistrictSelect.disabled = true;
            postidField.value = '';
            resultDisplay.innerHTML = '<p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡∏ö‡∏•/‡πÅ‡∏Ç‡∏ß‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå JSON</p>';
            if (provinceId) {
                const filteredDistricts = allDistricts.filter(d => d.province_id === provinceId);
                populateSelect(districtSelect, filteredDistricts, '-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≥‡πÄ‡∏†‡∏≠/‡πÄ‡∏Ç‡∏ï --');
            }
        });

        districtSelect.addEventListener('change', () => {
            const districtId = parseInt(districtSelect.value);
            subdistrictSelect.disabled = true;
            postidField.value = '';
            resultDisplay.innerHTML = '<p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡∏ö‡∏•/‡πÅ‡∏Ç‡∏ß‡∏á ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå JSON</p>';
            if (districtId) {
                const filteredSubdistricts = allSubdistricts.filter(s => s.district_id === districtId);
                populateSelect(subdistrictSelect, filteredSubdistricts, '-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏≥‡∏ö‡∏•/‡πÅ‡∏Ç‡∏ß‡∏á --');
            }
        });

        subdistrictSelect.addEventListener('change', () => {
            const subdistrictId = parseInt(subdistrictSelect.value);
            resultDisplay.innerHTML = '<p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå...</p>';

            if (subdistrictId) {
                const selectedProvince = allProvinces.find(p => p.id === parseInt(provinceSelect.value));
                const selectedDistrict = allDistricts.find(d => d.id === parseInt(districtSelect.value));
                const selectedSubdistrict = allSubdistricts.find(s => s.id === subdistrictId);

                if (selectedSubdistrict) {
                    const responseDataObject = {
                        province: { id: selectedProvince.id, name_th: selectedProvince.name_th },
                        district: { id: selectedDistrict.id, name_th: selectedDistrict.name_th },
                        subdistrict: { id: selectedSubdistrict.id, name_th: selectedSubdistrict.name_th, postid: selectedSubdistrict.zip_code }
                    };
                    postidField.value = selectedSubdistrict.zip_code;

                    resultDisplay.innerHTML = `
                        <p style="font-weight: bold;">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å: ${selectedSubdistrict.name_th}, ${selectedDistrict.name_th}, ${selectedProvince.name_th}</p>
                        <p style="font-weight: bold;">‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥: ${selectedSubdistrict.zip_code}</p>
                        <hr>
                        <div class="api-section api-output">
                            <h4>1. Response Body (JSON Output / ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)</h4>
                            <p style="font-size: 14px; color: #555;">‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠ Object ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å/‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ Server</p>
                            <pre>${JSON.stringify(responseDataObject, null, 2)}</pre>
                        </div>
                    `;
                }
            }
        });

        document.addEventListener('DOMContentLoaded', loadAllData);
    </script>

</body>

</html>
